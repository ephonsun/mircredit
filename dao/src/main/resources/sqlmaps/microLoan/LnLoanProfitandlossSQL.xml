<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="LN_LOAN_PROFITANDLOSS" >
  <resultMap id="abatorgenerated_LnLoanProfitandlossResult" class="com.banger.mobile.domain.model.loan.LnLoanProfitandloss" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Mar 14 14:51:06 CST 2016.
    -->
    <result column="LOAN_PROFITANDLOSS_ID" property="loanProfitandlossId" jdbcType="INTEGER" />
    <result column="LOAN_ID" property="loanId" jdbcType="INTEGER" />
    <result column="BEGIN_MONTH" property="beginMonth" jdbcType="VARCHAR" />
    <result column="END_MONTH" property="endMonth" jdbcType="VARCHAR" />
    <result column="END_RATE" property="endRate" jdbcType="INTEGER" />
    <result column="TURNOVER" property="turnover" jdbcType="VARCHAR" />
    <result column="CROSSCHECK" property="crosscheck" jdbcType="VARCHAR" />
  </resultMap>
 
  <select id="selectProfitandlossByPrimary" resultMap="abatorgenerated_LnLoanProfitandlossResult" parameterClass="com.banger.mobile.domain.model.loan.LnLoanProfitandloss" >
   
    select LOAN_PROFITANDLOSS_ID, LOAN_ID, BEGIN_MONTH, END_MONTH, END_RATE, TURNOVER, CROSSCHECK
    from LN_LOAN_PROFITANDLOSS WHERE 1=1
     <isNotEmpty property="loanProfitandlossId" prepend="AND">
		   		   		LOAN_PROFITANDLOSS_ID = #loanProfitandlossId#
		</isNotEmpty>
        <isNotEmpty property="loanId" prepend="AND">
		   		   		LOAN_ID = #loanId#
		</isNotEmpty>
  </select>
 
  <insert id="insertProfitandloss" parameterClass="com.banger.mobile.domain.model.loan.LnLoanProfitandloss" >
   
    insert into LN_LOAN_PROFITANDLOSS (LOAN_PROFITANDLOSS_ID, LOAN_ID, BEGIN_MONTH, END_MONTH,
      END_RATE, TURNOVER, CROSSCHECK)
    values (#loanProfitandlossId:INTEGER#, #loanId:INTEGER#, #beginMonth:VARCHAR#,
      #endMonth:VARCHAR#, #endRate:INTEGER#, #turnover:VARCHAR#, #crosscheck:VARCHAR#)
   <selectKey keyProperty="loanProfitandlossId"
			resultClass="java.lang.Integer" type="pre">
			values NEXTVAL for SEQ_LN_LOAN_PROFITANDLOSS
		</selectKey>
  </insert>

  <update id="updateProfitandlossBaseInfo" parameterClass="com.banger.mobile.domain.model.loan.LnLoanProfitandloss">
	    update LN_LOAN_PROFITANDLOSS
	    set	BEGIN_MONTH = #beginMonth:VARCHAR#,
		END_MONTH = #endMonth:VARCHAR#,
		END_RATE = #endRate:INTEGER#
   	WHERE LOAN_PROFITANDLOSS_ID=#loanProfitandlossId#
  </update>
  <update id="updateProfitandloss" parameterClass="com.banger.mobile.domain.model.loan.LnLoanProfitandloss">
	    update LN_LOAN_PROFITANDLOSS
	    set	TURNOVER = #turnover:VARCHAR#,
		CROSSCHECK = #crosscheck:VARCHAR#
   	WHERE LOAN_PROFITANDLOSS_ID=#loanProfitandlossId# 
  </update>
</sqlMap>